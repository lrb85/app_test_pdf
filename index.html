<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test App</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <h1>Test App</h1>
        
        <!-- Bot√≥n de Tema -->
        <button id="theme-toggle-fab" title="Cambiar Tema">
            <span class="icon-sun">‚òÄÔ∏è</span>
            <span class="icon-moon">üåô</span>
        </button>

        <nav>
            <button id="nav-selector">Realizar Examen</button>
            <button id="nav-stats">Estad√≠sticas</button>
            <button id="nav-settings">Ajustes</button>
        </nav>
    </header>

    <!-- NUEVO: Pista de Atletismo (Sidebar Izquierda) -->
    <div id="race-track-sidebar" class="hidden">
        <button id="race-toggle-btn" title="Ocultar Pista">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <div class="race-track-header">üèÅ META</div>
        <div class="track-lanes">
            <div class="track-lane" id="lane-cheetah" title="GUEPI">
                <div class="animal-avatar" id="animal-cheetah">üêÜ</div>
            </div>
            <div class="track-lane" id="lane-octopus" title="PULPI">
                <div class="animal-avatar" id="animal-octopus">üêô</div>
            </div>
            <div class="track-lane" id="lane-koala" title="MANDIS">
                <div class="animal-avatar" id="animal-koala">üê®</div>
            </div>
            <div class="track-lane" id="lane-dog" title="GOYITO">
                <div class="animal-avatar" id="animal-dog">üêï</div>
            </div>
            <div class="track-lane" id="lane-turtle" title="GARY">
                <div class="animal-avatar" id="animal-turtle">üê¢</div>
            </div>
        </div>
        <div class="race-track-footer">SALIDA</div>
    </div>

    <div class="content-wrapper">
        <main>
            <!-- Vista para Seleccionar Examen -->
            <div id="selector-view" class="view active">
                <div id="resume-test-container" class="hidden">
                    <button id="resume-btn">Continuar Examen en Curso</button>
                </div>
                
                <!-- Secci√≥n para Pr√°ctica Global -->
                <div id="global-practice-container" style="margin-bottom: 2rem; border-bottom: 1px solid var(--border-color); padding-bottom: 1.5rem;">
                     <h2>Pr√°ctica Global</h2>
                     <p>Realiza un examen con las preguntas que m√°s has fallado en todos los tests.</p>
                     <div class="exam-item-controls" style="flex-direction: row; justify-content: center; flex-wrap: wrap;">
                         <button id="practice-top-10-failed-btn" class="practice-failed-btn" disabled>Practicar las 10 m√°s falladas (0)</button>
                         <button id="practice-top-100-failed-btn" class="practice-failed-btn" disabled>Practicar las 100 m√°s falladas (0)</button>
                         <button id="practice-recent-failed-btn" class="practice-failed-btn" disabled>Practicar 20 falladas recientemente (0)</button>
                         <button id="practice-over-50-failed-btn" class="practice-failed-btn" disabled>Practicar >50% Falladas (0)</button>
                     </div>
                </div>

                <h2>Selecciona un Examen para Realizar</h2>
                <div id="exam-list-container"></div>
                <div id="loader-status"></div>
            </div>

            <!-- Vista para Realizar el Test -->
            <div id="test-view" class="view">
                <div class="test-header">
                    <h2 id="test-title"></h2>
                    <div class="test-info">
                        <div id="question-counter"></div>
                        <div id="timer"></div>
                    </div>
                </div>
                <div id="question-container">
                    <p id="question-text"></p>
                    <div id="question-image-container" class="hidden"></div>
                    <div id="options-container"></div>
                </div>
                <div class="test-navigation">
                    <div>
                        <button id="show-answer-btn">Mostrar Respuesta</button>
                    </div>
                    <div>
                        <button id="prev-btn">Anterior</button>
                        <button id="next-btn">Siguiente</button>
                        <button id="finish-btn" class="hidden">Finalizar Examen</button>
                    </div>
                </div>
            </div>

            <!-- Vista de Resultados -->
            <div id="results-view" class="view">
                <h2>Resultados del Examen</h2>
                
                <!-- Resumen Acad√©mico + Carrera + Grilla (Todo se inyectar√° aqu√≠) -->
                <div id="results-summary"></div>

                <div class="results-footer" id="results-footer">
                    <div class="results-footer-info">
                        <p class="exam-title-summary"><strong>Examen:</strong> <span></span></p>
                    </div>
                    <div class="results-footer-buttons" id="results-footer-buttons">
                        <button id="restart-test-btn">Reiniciar Examen</button>
                    </div>
                </div>
                <div id="review-container"></div>
                <button id="back-to-home-btn">Volver al Inicio</button>
            </div>

            <!-- Vista de Estad√≠sticas -->
            <div id="stats-view" class="view">
                <h2>Tus Estad√≠sticas</h2>
                
                <div id="readiness-container"></div>
                
                <div class="stats-controls">
                    <div class="form-group">
                        <label for="stats-exam-select">Selecciona un examen:</label>
                        <div class="custom-select-wrapper">
                            <select id="stats-exam-select" style="display: none;">
                                <option value="all">Estad√≠sticas Generales</option>
                            </select>
                            <div class="custom-select">
                                <div class="custom-select-trigger">
                                    <span>Estad√≠sticas Generales</span>
                                </div>
                                <div class="custom-options"></div>
                            </div>
                        </div>
                    </div>
                    <div class="stats-buttons-group">
                        <button id="restore-stats-btn" class="hidden">Restaurar Copia</button>
                        <button id="reset-stats-btn">Resetear Estad√≠sticas</button>
                    </div>
                </div>
                
                <div id="stats-details"></div>

                <!-- Secci√≥n de Logros -->
                <h3>Logros Desbloqueados</h3>
                <div id="achievements-container" class="achievements-grid">
                    <!-- Los logros se generan v√≠a JS -->
                </div>

                <!-- Gr√°ficas -->
                <div class="chart-section">
                    <h3>An√°lisis de Rendimiento</h3>
                    <div id="progress-chart-container" class="chart-container">
                        <!-- SVG generado por JS -->
                        <p class="no-data-msg">Realiza algunos ex√°menes para ver tu progreso.</p>
                    </div>
                    
                    <!-- NUEVO CONTENEDOR PARA GR√ÅFICAS ADICIONALES -->
                    <div id="additional-charts-grid" class="charts-grid">
                        <!-- Se rellenar√° con JS -->
                    </div>
                </div>

                <h3>Preguntas M√°s Falladas</h3>
                <ul id="failed-questions-list"></ul>

            </div>

            <!-- Vista de Ajustes -->
            <div id="settings-view" class="view">
                <h2>Ajustes del Examen</h2>
                <div class="settings-form">
                    
                    <!-- Selector de Tema -->
                    <div class="form-group">
                        <label>Tema de la Aplicaci√≥n:</label>
                        <div class="btn-group" id="theme-setting-group">
                            <button data-value="light">Claro</button>
                            <button data-value="dark">Oscuro</button>
                            <button data-value="system">Sistema</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Tiempo L√≠mite para el Examen:</label>
                        <div class="btn-group" id="setting-time-group">
                            <button data-value="0">Sin l√≠mite</button>
                            <button data-value="10">10 min</button>
                            <button data-value="30">30 min</button>
                            <button data-value="60">60 min</button>
                            <button data-value="90">90 min</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Orden de las Preguntas:</label>
                        <div class="btn-group" id="q-order-group">
                            <button data-value="original">Original</button>
                            <button data-value="random">Aleatorio</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Orden de las Respuestas:</label>
                        <div class="btn-group" id="a-order-group">
                            <button data-value="original">Original</button>
                            <button data-value="random">Aleatorio</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Panel Lateral de Preguntas (Derecha):</label>
                        <div class="btn-group" id="sidebar-setting-group">
                            <button data-value="enabled">Activado</button>
                            <button data-value="disabled">Desactivado</button>
                        </div>
                    </div>
                     <!-- Ajuste de la Carrera -->
                     <div class="form-group">
                        <label>Pista de Atletismo (Izquierda):</label>
                        <div class="btn-group" id="race-setting-group">
                            <button data-value="enabled">Activado</button>
                            <button data-value="disabled">Desactivado</button>
                        </div>
                    </div>

                     <div class="form-group">
                        <label>Mostrar Im√°genes en las Preguntas:</label>
                        <div class="btn-group" id="image-setting-group">
                            <button data-value="yes">S√≠</button>
                            <button data-value="no">No</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Pasar autom√°ticamente a la siguiente pregunta:</label>
                        <div class="btn-group" id="auto-advance-group">
                            <button data-value="yes">S√≠</button>
                            <button data-value="no">No</button>
                        </div>
                    </div>
                </div>

                <!-- Secci√≥n de Importar/Exportar -->
                <div class="settings-section" style="margin-top: 2rem; border-top: 1px solid var(--border-color); padding-top: 1.5rem;">
                    <h3>Sincronizar Progreso</h3>
                    <p>Exporta tu examen en curso para continuar en otro dispositivo, o importa un progreso previo.</p>
                    <div class="btn-group">
                        <button id="export-progress-btn">Exportar Progreso</button>
                        <button id="import-progress-btn">Importar Progreso</button>
                        <input type="file" id="import-file-input" class="hidden" accept=".json">
                    </div>
                    <p id="import-export-msg" class="hidden" style="margin-top: 1rem; font-weight: bold;"></p>
                </div>
            </div>
        </main>
        
        <!-- Panel Lateral (Derecha) -->
        <div id="question-sidebar" class="hidden">
            <button id="sidebar-toggle-btn" title="Ocultar Panel">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <!-- Header de Estad√≠sticas del Sidebar -->
            <div id="sidebar-stats-header">
                <div class="sb-stat-item clickable active" id="sb-stat-total" title="Mostrar todas">
                    <span class="sb-label">Total</span>
                    <span class="sb-value">0</span>
                </div>
                <div class="sb-stat-item clickable" id="sb-stat-correct" title="Filtrar por correctas">
                    <span class="sb-label">Bien</span>
                    <span class="sb-value">0</span>
                </div>
                <div class="sb-stat-item clickable" id="sb-stat-incorrect" title="Filtrar por fallos">
                    <span class="sb-label">Mal</span>
                    <span class="sb-value">0</span>
                </div>
                <div class="sb-stat-item clickable" id="sb-stat-unanswered" title="Filtrar por sin responder">
                    <span class="sb-label">Pend.</span>
                    <span class="sb-value">0</span>
                </div>
            </div>
            <div id="sidebar-content">
                <!-- Las tarjetas de las preguntas se generar√°n aqu√≠ -->
            </div>
        </div>
    </div>

    <!-- Modales -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <div id="modal-container" class="modal-container">
            <button id="modal-close-btn" class="modal-close-btn">&times;</button>
            <h3>Practicar Pregunta</h3>
            <p id="modal-question-text"></p>
            <div id="modal-options-container"></div>
            <div class="modal-footer">
                <button id="modal-check-btn">Comprobar Respuesta</button>
                <p id="modal-correct-answer"></p>
            </div>
        </div>
    </div>

    <div id="reset-modal-overlay" class="modal-overlay hidden">
        <div id="reset-modal-container" class="modal-container">
            <h3>Confirmar Reseteo de Estad√≠sticas</h3>
            <p>Esta acci√≥n es <strong>irreversible</strong> y borrar√° las estad√≠sticas seleccionadas permanentemente.</p>
            <p>Para confirmar, escribe la palabra <strong>eliminar</strong> en el campo de abajo.</p>
            <input type="text" id="reset-confirm-input" placeholder="Escribe aqu√≠..." autocomplete="off">
            <div class="reset-modal-footer">
                <button id="reset-cancel-btn">Cancelar</button>
                <button id="reset-confirm-btn" class="danger" disabled>Resetear Estad√≠sticas</button>
            </div>
        </div>
    </div>
    
    <div id="restore-modal-overlay" class="modal-overlay hidden">
        <div id="restore-modal-container" class="modal-container">
            <h3>Restaurar Copia de Seguridad</h3>
            <p>Esta acci√≥n es <strong>irreversible</strong>.</p>
            <p id="restore-modal-instruction"></p>
            <div id="restore-options-container"></div>
            <p style="margin-top: 1rem;">Para confirmar la restauraci√≥n, escribe la palabra <strong>restaurar</strong> en el campo de abajo.</p>
            <input type="text" id="restore-confirm-input" placeholder="Escribe aqu√≠..." autocomplete="off">
            <div class="restore-modal-footer">
                <button id="restore-cancel-btn">Cancelar</button>
                <button id="restore-confirm-btn" class="success" disabled>Confirmar Restauraci√≥n</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="exams/H12-811_V1.0_full.js"></script>
    <script src="exams/H12-811_V1.0_882.js"></script>
    <script src="exams/H12-811_V1.0_parcial_extra.js"></script>
    <script src="exams/H12-811_V1.0_parcial_1_50.js"></script>
    <script src="exams/H12-811_V1.0_parcial_51_100.js"></script>
    <script src="exams/H12-811_V1.0_parcial_101_150.js"></script>
    <script src="exams/H12-811_V1.0_parcial_151_200.js"></script>
    <script src="exams/H12-811_V1.0_parcial_201_250.js"></script>
    <script src="exams/H12-811_V1.0_parcial_251_300.js"></script>
    <script src="exams/H12-811_V1.0_parcial_301_350.js"></script>
    <script src="exams/H12-811_V1.0_parcial_351_400.js"></script>
    <script src="exams/H12-811_V1.0_parcial_401_450.js"></script>
    <script src="exams/H12-811_V1.0_parcial_451_500.js"></script>
    <script src="exams/H12-811_V1.0_parcial_501_550.js"></script>
    <script src="exams/H12-811_V1.0_parcial_551_590.js"></script>
    <script src="exams/H12-811_V1.0_parcial_591_600.js"></script>
    <script src="exams/H12-811_V1.0_parcial_601_650.js"></script>
    <script src="exams/H12-811_V1.0_parcial_651_700.js"></script>
    <script src="exams/H12-811_V1.0_parcial_701_750.js"></script>
    <script src="exams/H12-811_V1.0_parcial_751_800.js"></script>
    <script src="exams/H12-811_V1.0_parcial_801_850.js"></script>
    <script src="exams/H12-811_V1.0_parcial_851_900.js"></script>
    <script src="exams/H12-811_V1.0_parcial_901_931.js"></script>
</body>

</html>
